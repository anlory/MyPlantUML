@startuml
title InputMethodService 结构

abstract class AbstractInputMethodService{
    onBind()
    onGenericMotionEvent()
}
 
interface IInputMethod
{
    showSoftInput()
    hideSoftInput()
    startInput()
    createSession()
    changeInputMethodSubtype()
    ...()

}
note top:Top-level interface to an input method component

interface InputMethod
{
    showSoftInput()
    hideSoftInput()
    startInput()
    createSession()
    changeInputMethodSubtype()
    ...()
}

class InputMethodService {
    onGenericMotionEvent()
    onKeyDown()

}
note left:输入法

interface InputMethodSession{
    updateSelection()
    viewClicked()
    notifyImeHidden()
    ...()
}

interface IInputMethodSession{
    updateSelection()
    viewClicked()
    notifyImeHidden()
    ...()
}
note top 
Sub-interface of IInputMethod which is 
safe to give to client applications.
end note



class ImeInputEventReceiver{

}

class IInputMethodSessionWrapper{
    mInputMethodSession
    mReceiver
    
}

class IInputMethodWrapper{
    mInputMethod
}

IInputMethod <|-- IInputMethod.Stub
IInputMethod.Stub <|-- IInputMethodWrapper




interface Service
abstract class InputEventReceiver

Service <|-- AbstractInputMethodService
AbstractInputMethodService <|-- InputMethodService

InputEventReceiver  <|-- ImeInputEventReceiver

IInputMethodSession <|-- IInputMethodSessionWrapper

IInputMethodSessionWrapper -> ImeInputEventReceiver:mReceiver


InputMethod <|-- AbstractInputMethodImpl
AbstractInputMethodImpl <|-- InputMethodImpl
IInputMethodWrapper -> InputMethodImpl:mInputMethod



InputMethodSession <|-- AbstractInputMethodSessionImpl
AbstractInputMethodSessionImpl <|-- InputMethodSessionImpl
IInputMethodSessionWrapper -> InputMethodSessionImpl:mInputMethodSession

@enduml
